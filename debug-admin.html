<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Debug</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug { background: #f5f5f5; padding: 10px; margin: 10px 0; border-left: 3px solid #007cba; }
        .product-card { border: 1px solid #ddd; margin: 10px; padding: 15px; display: inline-block; width: 200px; }
    </style>
</head>
<body>
    <h1>Test Debug Admin</h1>
    
    <div class="debug">
        <h3>Étape 1: Vérification localStorage</h3>
        <div id="localStorage-check"></div>
    </div>
    
    <div class="debug">
        <h3>Étape 2: Test de la fonction getProducts()</h3>
        <div id="getProducts-test"></div>
    </div>
    
    <div class="debug">
        <h3>Étape 3: Conteneur admin-products-list</h3>
        <div id="container-test"></div>
        <div id="admin-products-list" style="border: 2px solid red; min-height: 100px;">
            <!-- Test container -->
        </div>
    </div>
    
    <div class="debug">
        <h3>Étape 4: Création manuelle des cartes</h3>
        <div id="manual-cards"></div>
    </div>

    <script>
        // Test 1: localStorage
        document.write('maspalegryProducts: ' + (localStorage.getItem('maspalegryProducts') ? 'EXISTS' : 'NOT FOUND'));
        
        // Test 2: Fonction getProducts simplifiée
        function getProducts() {
            return JSON.parse(localStorage.getItem('maspalegryProducts')) || {
                1: { name: 'T-shirt Pilot Wings', category: 'tshirts', price: 25.99, icon: 'fas fa-tshirt' },
                2: { name: 'T-shirt Cessna Vintage', category: 'tshirts', price: 24.99, icon: 'fas fa-tshirt' },
                3: { name: 'Casquette Pilote', category: 'accessories', price: 19.99, icon: 'fas fa-user-pilot' }
            };
        }
        
        const products = getProducts();
        document.getElementById('getProducts-test').innerHTML = 
            'Produits trouvés: ' + Object.keys(products).length + '<br>' +
            'Premier produit: ' + (products[1] ? products[1].name : 'ERREUR');
        
        // Test 3: Conteneur
        const container = document.getElementById('admin-products-list');
        document.getElementById('container-test').innerHTML = 
            'Conteneur trouvé: ' + (container ? 'OUI' : 'NON') + '<br>' +
            'ID du conteneur: ' + (container ? container.id : 'N/A');
        
        // Test 4: Création manuelle
        if (container && Object.keys(products).length > 0) {
            Object.entries(products).forEach(([id, product]) => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <h4>${product.name}</h4>
                    <p>Prix: ${product.price}€</p>
                    <p>Catégorie: ${product.category}</p>
                `;
                container.appendChild(productCard);
            });
            document.getElementById('manual-cards').innerHTML = 'Cartes créées avec succès!';
        } else {
            document.getElementById('manual-cards').innerHTML = 'ERREUR: Impossible de créer les cartes';
        }
    </script>
</body>
</html>
